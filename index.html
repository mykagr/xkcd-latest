<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Latest XKCD</title>
</head>
<body style="text-align:center;font-family:sans-serif;margin:0;padding:1rem;">
  <div id="comic">Loading latest xkcdâ€¦</div>

  <script>
    async function loadLatest() {
      const proxy = "https://api.allorigins.win/get?url=" + encodeURIComponent("https://xkcd.com/");
      const data = await fetch(proxy).then(r => r.json());
      const html = data.contents;

      // extract the comic image
      const imgMatch = html.match(/<img src="(\/\/imgs.xkcd.com\/comics\/[^"]+)"/);
      if (imgMatch) {
        document.getElementById("comic").innerHTML = `
          <img src="https:${imgMatch[1]}" style="max-width:100%;height:auto;">
        `;
      } else {
        document.getElementById("comic").textContent = "Could not load comic.";
      }
    }
    loadLatest();
  </script>
</body>
</html>
